<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="css/home-personalized-styleguide.css" />
  <link rel="stylesheet" href="css/home-personalized-style.css" />
  <link rel="stylesheet" href="https://indestructibletype.com/fonts/Jost.css" type="text/css" charset="utf-8" />
</head>

<body>
  <div class="home-personalized">
    <div class="div">
      <footer class="footer">
        <div class="overlap-group">
          <div class="rectangle"></div>
          <img class="sport-news-high" src="img/logo.png" />
          <p class="text-wrapper">Copyright © 2024 Sport News. All rights reserved.</p>
          <p class="text-wrapper-50"> Published by CZU students.</p>
        </div>
        <div class="social-networkes">
          <a href="https://twitter.com" target="_blank">
            <img class="twitter" src="img/twitter-1.png" alt="Twitter" />
          </a>
          <a href="https://instagram.com" target="_blank">
            <img class="instagram-logo" src="img/instagram-logo-1.png" alt="Instagram" />
          </a>
          <a href="https://facebook.com" target="_blank">
            <img class="facebook" src="img/facebook-1.png" alt="Facebook" />
          </a>
          <a href="https://tiktok.com" target="_blank">
            <img class="tik-tok" src="img/tik-tok-1.png" alt="TikTok" />
          </a>
          <a href="https://youtube.com" target="_blank">
            <img class="youtube" src="img/youtube-1.png" alt="YouTube" />
          </a>
          <a href="https://whatsapp.com" target="_blank">
            <img class="whatsapp" src="img/whatsapp-1.png" alt="WhatsApp" />
          </a>
          <a href="https://telegram.org" target="_blank">
            <img class="telegram" src="img/telegram-1.png" alt="Telegram" />
          </a>
        </div>
        <p class="terms-conditions">
          <a href="about-us.html" target="_blank">About Us</a>&nbsp;&nbsp;|&nbsp;&nbsp;
          <a href="terms-condition.html" target="_blank">Terms of Services</a>
          <br /><br />
          Authors:<br />
          Mohsen Amirian | Marziye Sarvarizade | Ognjen Ostojic
        </p>
        <img class="line" src="img/line-1.svg" />
      </footer>

      
      <main class="home-main">
        <section class="welcome-section">
          <h1 id="welcome-message">Welcome!</h1>
          <p id="personalized-message">Here's what's trending for you.</p>
        </section>

        <section class="personalized-content" id="content-section">
          <!-- Dynamic content will be inserted here -->
        </section>
      </main>

      <div class="element-header">
        <a href="./home.html">
          <img class="sport-news-high" src="img/logo.png" alt="Logo" />
        </a>
        <div class="menu">
          <img src="img/Menu.png" alt="Menu Icon" onclick="toggleMenu()" />
          <div class="dropdown-menu">
            <a href="buy-subscription.html" style="display: none;">Buy Subscription</a>
            <a href="latest-news-category.html">Latest News</a>
            <a href="./about-us.html">About Us</a>
            <a href="contact-us.html">Contact Us</a>
            <a href="terms-condition.html">Terms of our Services</a>
            <a href="raw.html"> raw file</a>
          </div>
        </div>
        <div class="search-container">
          <img class="magnifying-glass" src="img/search.png" alt="Search" />
          <input type="text" class="search-box" placeholder="Search..." onkeyup="showResults(this.value)" />
          <div id="search-results" class="search-results">
            <!-- Dynamic search results will appear here -->
          </div>
        </div>
        <div class="user-menu">
          <img class="user-icon" src="img/user2.png" alt="Profile" onclick="toggleUserMenu()" />
          <div class="dropdown-user-menu">
            <a href="profile.html" id="signin-btn">Profile</a>
            <a id="logout-link">Log Out</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  function toggleMenu() {
    const menu = document.querySelector('.menu');
    menu.classList.toggle('active');
  }

  // Close menu when clicking outside
  document.addEventListener('click', function (event) {
    const menu = document.querySelector('.menu');
    const isClickInsideMenu = menu.contains(event.target);

    if (!isClickInsideMenu) {
      menu.classList.remove('active');
    }
  });

  // Handle Sign In/Log Out logic
  document.getElementById('signin-btn').addEventListener('click', function (event) {
    event.stopPropagation(); // Prevent click from propagating to the document
    if (this.textContent === 'Sign In') {
      // Handle sign-in logic
      this.textContent = 'Log Out';
    } else {
      // Handle log-out logic
      this.textContent = 'Sign In';
    }
  });


  function toggleUserMenu() {
    const userMenu = document.querySelector('.user-menu');
    userMenu.classList.toggle('active');
  }

  // Close menu when clicking outside
  document.addEventListener('click', function (event) {
    const userMenu = document.querySelector('.user-menu');
    const isClickInsideMenu = userMenu.contains(event.target);

    if (!isClickInsideMenu) {
      userMenu.classList.remove('active');
    }
  });

  document.addEventListener('click', function (event) {
  const searchContainer = document.querySelector('.search-container');
  const resultsContainer = document.getElementById('search-results');

  // Check if the click occurred inside the search container
  if (!searchContainer.contains(event.target)) {
    resultsContainer.style.display = 'none'; // Hide the search results
  }
});

  function showResults(query) {
  const resultsContainer = document.getElementById('search-results');

  // If input is empty, hide the results
  if (!query) {
    resultsContainer.style.display = 'none';
    return;
  }

  // Show results container
  resultsContainer.style.display = 'block';

  // Clear any previous results
  resultsContainer.innerHTML = '';

  // Array of random words/phrases
  const randomWordsBefore = [
  "Breaking:", 
  "Latest:", 
  "Trending:", 
  "Featured:", 
  "Exclusive:", 
  "Hot Topic:", 
  "Don't Miss:", 
  "Just In:", 
  "Top Story:", 
  "Must Read:", 
  "Highlight:",
  "Fresh News:"
];

const randomWordsAfter = [
  "in Sports", 
  "Today", 
  "News Update", 
  "Highlights", 
  "Around the World", 
  "for You", 
  "2024 Edition", 
  "Special Coverage", 
  "Breaking Analysis", 
  "Insider Look", 
  "Latest Developments", 
  "Exclusive Details"
];

  // Generate search result items
  const numResults = 5; // Limit number of results
  for (let i = 1; i <= numResults; i++) {
    const resultItem = document.createElement('a');
    resultItem.href = `detail-article.html`; // Navigation link
    resultItem.classList.add('result-item');

    // Select random words
    const randomBefore = randomWordsBefore[Math.floor(Math.random() * randomWordsBefore.length)];
    const randomAfter = randomWordsAfter[Math.floor(Math.random() * randomWordsAfter.length)];

    // Set dynamic content
    resultItem.textContent = `${randomBefore} ${query} ${randomAfter}`;
    resultsContainer.appendChild(resultItem);
  }
};


// User interests content
const contentByUser = {
  "Jake Thompson": [
    {
      type: "article",
      title: "Top 10 Soccer Goals of 2024",
      description: "Relive the most exciting moments from this season’s soccer matches.",
      link: "articles/soccer-goals.html",
    },
    {
      type: "article",
      title: "The Rise of Women's Soccer: Global Impact",
      description: "An in-depth look at the growing popularity of women's soccer worldwide.",
      link: "articles/women-soccer.html",
    },
    {
      type: "video",
      title: "How Soccer Tactics Have Evolved",
      description: "A documentary on the strategic changes in soccer tactics over the decades.",
      link: "videos/soccer-tactics-evolution.html",
    },
    {
      type: "podcast",
      title: "Soccer Analytics: What Stats Matter?",
      description: "Join experts as they discuss the most important stats in soccer analytics.",
      link: "podcasts/soccer-analytics.html",
    },
    {
      type: "article",
      title: "The Best Soccer Clubs in Europe: Ranked",
      description: "A detailed ranking of Europe's top soccer clubs based on performance.",
      link: "articles/best-soccer-clubs.html",
    },
  ],
  "Lisa Martinez": [
    {
      type: "article",
      title: "How to Write Engaging Sports Blogs",
      description: "Tips and tricks to captivate your readers with exciting match recaps.",
      link: "articles/write-blogs.html",
    },
    {
      type: "photo",
      title: "Best Photos from Last Week's Games",
      description: "A gallery of stunning shots from recent sports events.",
      link: "photos/best-shots.html",
    },
    {
      type: "analysis",
      title: "In-Depth Match Analysis: Championship Final",
      description: "Breaking down the strategies and key moments of the final match.",
      link: "analysis/championship-final.html",
    },
    {
      type: "article",
      title: "How to Create a Sports Blog That Attracts Readers",
      description: "Step-by-step guide to building a sports blog with a loyal audience.",
      link: "articles/sports-blog-guide.html",
    },
    {
      type: "podcast",
      title: "Interview with a Sports Journalist",
      description: "Join Lisa as she talks with a veteran sports journalist about breaking news.",
      link: "podcasts/sports-journalist-interview.html",
    },
  ],
  "Ethan Kim": [
    {
      type: "video",
      title: "Best Basketball Highlights of the Year",
      description: "Watch the top plays and buzzer-beaters from this season.",
      link: "videos/basketball-highlights.html",
    },
    {
      type: "meme",
      title: "Trending Sports Memes",
      description: "Laugh out loud with these viral memes sweeping the sports world.",
      link: "memes/trending-memes.html",
    },
    {
      type: "article",
      title: "Top Tips to Improve Your Basketball Skills",
      description: "Level up your performance with these proven strategies.",
      link: "articles/basketball-tips.html",
    },
    {
      type: "video",
      title: "The Evolution of Basketball Sneakers",
      description: "A documentary about how basketball shoes have changed over time.",
      link: "videos/basketball-sneakers-evolution.html",
    },
    {
      type: "article",
      title: "Understanding Basketball Analytics",
      description: "A beginner's guide to understanding the advanced stats used in basketball.",
      link: "articles/basketball-analytics.html",
    },
    {
      type: "podcast",
      title: "The Future of Esports",
      description: "Experts discuss where esports is headed and its growing influence on traditional sports.",
      link: "podcasts/future-of-esports.html",
    },
  ],
};

// Display personalized content
function displayPersonalizedContent() {
  const user = JSON.parse(localStorage.getItem("loggedInUser"));
  const contentSection = document.getElementById("content-section");

  if (user && contentByUser[user.name]) {
    const contentItems = contentByUser[user.name];

    contentSection.innerHTML = contentItems
      .map(
        (item) => `
        <div class="content-item">
          <h3>${item.title}</h3>
          <p>${item.description}</p>
          <a href="detail-article.html?article=${encodeURIComponent(item.title)}" class="read-more-link">Read More</a>
        </div>
      `
      )
      .join("");
  } else {
    contentSection.innerHTML = `<p>No personalized content available. Log in to see your content.</p>`;
  }
}

// Logout function
function logout() {
  localStorage.removeItem("loggedInUser");
  alert("You have been logged out.");
  window.location.href = "login.html"; // Redirect to login page
}

// Initialize
displayPersonalizedContent();


// Ensure the Buy Subscription link is only shown when a user is logged in
document.addEventListener("DOMContentLoaded", () => {
  const subscriptionLink = document.querySelector(".dropdown-menu a[href='buy-subscription.html']");
  const loggedInUser = localStorage.getItem("loggedInUser");

  if (loggedInUser) {
    // User is logged in, show the Buy Subscription link
    subscriptionLink.style.display = "block";
  } else {
    // User is not logged in, hide the Buy Subscription link
    subscriptionLink.style.display = "none";
  }
});

document.addEventListener("DOMContentLoaded", () => {
  const loggedInUser = localStorage.getItem("loggedInUser");
  const userMenu = document.querySelector(".dropdown-user-menu");

  if (loggedInUser) {
    // User is logged in, show Profile and Log Out options
    userMenu.innerHTML = `
      <a href="profile.html" id="profile-link">Profile</a>
      <a id="logout-link">Log Out</a>
    `;

    // Handle Log Out action
    document.getElementById("logout-link").addEventListener("click", () => {
      localStorage.removeItem("loggedInUser"); // Clear user data
      window.location.href = "home.html"; // Redirect to home page
    });
  } else {
    // User is not logged in, show Sign In and Register options
    userMenu.innerHTML = `
      <a href="login.html" id="signin-btn">Sign In</a>
      <a href="register.html">Register</a>
    `;
  }
});


</script>

</html>